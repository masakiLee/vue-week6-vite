import{_ as m,o as c,c as d,b as i,e as t,F as u,f as g,g as x,t as o,h as f,v}from"./index-9cdd37d1.js";const{VITE_APP_URL:h,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"masaki",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},C={data(){return{cart:{}}},methods:{getCart(){this.$http.get(`${h}v2/api/${_}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.data.message)})},updateCartItem(e){const n={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${h}v2/api/${_}/cart/${e.id}`,{data:n}).then(r=>{this.getCart(),this.loadingItem=""}).catch(r=>{alert(r.data.message)})},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${h}v2/api/${_}/cart/${e.id}`).then(n=>{this.getCart(),this.loadingItem=""}).catch(n=>{alert(n.data.message)})}},mounted(){this.getCart()}},I={class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),y=["onClick"],P=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),V={class:"input-group input-group-sm"},b=["onUpdate:modelValue","onChange"],k=["value"],E={class:"text-end"},A=t("small",{class:"text-success"},"折扣價：",-1),T=t("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"},U=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),q={class:"text-end text-success"};function B(e,n,r,L,l,p){return c(),d(u,null,[i("這是購物車 "),t("table",I,[$,t("tbody",null,[l.cart.carts?(c(!0),d(u,{key:0},g(l.cart.carts,s=>(c(),d("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteItem(s)},[P,i(" x ")],8,y)]),t("td",null,o(s.product.title),1),t("td",null,[t("div",V,[f(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":a=>s.qty=a,onChange:a=>p.updateCartItem(s)},[(c(),d(u,null,g(20,a=>t("option",{value:a,key:`${a}123`},o(a),9,k)),64))],40,b),[[v,s.qty]])])]),t("td",E,[A,i(" "+o(s.total),1)])]))),128)):x("",!0)]),t("tfoot",null,[t("tr",null,[T,t("td",D,o(l.cart.total),1)]),t("tr",null,[U,t("td",q,o(l.cart.final_total),1)])])])],64)}const w=m(C,[["render",B]]);export{w as default};
